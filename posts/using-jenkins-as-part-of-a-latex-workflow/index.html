<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Using Jenkins as Part of a Latex Workflow &#183; George Vanburgh</title><meta name=description content="LaTeX is a fantastic, sometimes forgotten typesetting system - with a radically different workflow compared to most WYSIWYG editors. The fact that, in LaTeX, what you edit (a .tex file), and what you produce (typically a .pdf or .ps file) are totally different files can take a bit of getting used to. This idea of treating &lsquo;documents as source-code&rsquo; has some powerful benefits, however. Many people already use VCS as a repository for storing LaTeX markup - which has numerous benefits when it comes to managing multiple different versions of a document, and writing with multiple contributors."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.83.1"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://georgevanburgh.github.io/blog/dist/site.css><link rel=stylesheet href=https://georgevanburgh.github.io/blog/dist/syntax.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous></head><body><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://georgevanburgh.github.io/blog/>George Vanburgh</a></h1><a class="button-square button-social hint--top" data-hint=Twitter aria-label=Twitter href=https://twitter.com/georgevanburgh rel=me><i class="fa fa-twitter" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Github aria-label=Github href=https://github.com/georgevanburgh rel=me><i class="fa fa-github-alt" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint="Stack Overflow" aria-label="Stack Overflow" href=https://stackoverflow.com/users/1657432/georgevanburgh rel=me><i class="fa fa-stack-overflow" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=LinkedIn aria-label=LinkedIn href=https://linkedin.com/in/georgevanburgh/ rel=me><i class="fa fa-linkedin" aria-hidden=true></i></a></div><ul class=site-nav><li class=site-nav-item><a href=/blog/>Blog</a></li></ul></div></header><div id=container><div class=container><article class=post-container><header class=post-header><h1 class=post-title>Using Jenkins as Part of a Latex Workflow</h1></header><div class="post-content clearfix"><p><code>LaTeX</code> is a fantastic, sometimes forgotten typesetting system - with a radically different workflow compared to most <a href=https://en.wikipedia.org/wiki/WYSIWYG>WYSIWYG</a> editors. The fact that, in <code>LaTeX</code>, what you edit (a <code>.tex</code> file), and what you produce (typically a <code>.pdf</code> or <code>.ps</code> file) are totally different files can take a bit of getting used to. This idea of treating &lsquo;documents as source-code&rsquo; has some powerful benefits, however. Many people already use VCS as a repository for storing <code>LaTeX</code> markup - which has numerous benefits when it comes to managing multiple different versions of a document, and writing with multiple contributors. This post takes this markup-as-code' idea one step further and uses another tool familiar to software developers - build servers such as Jenkins<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><h2 id=why-bother>Why bother?</h2><p>Some of you may be asking: Why use a build server to produce <code>LaTeX</code> documents?. Why not simply compile the PDF on your local machine, and copy it into Dropbox/Google Drive/an email? Whilst certainly an overkill addition to any small <code>LaTeX</code> project, there are numerous advantages when writing long-running documents with multiple contributors:</p><ul><li>No need to install a (sizable) <code>LaTeX</code> environment on your main development machine (especially useful if you use a number of packages not in the minimal <code>LaTeX</code> install)</li><li>Automatically produces a PDF from the latest version checked into VCS - no more forgetting to email your boss the most up-to-date copy (oops).</li><li>Ensures anybody else working on your document can build the latest version successfully</li></ul><p>If nothing else - it&rsquo;s a great learning opportunity.</p><h2 id=how>How?</h2><p>We&rsquo;ll be using Jenkins<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> for this guide on account of it being free and open source - however this can also be done using your favorite build server - be it <a href=https://www.jetbrains.com/teamcity/>TeamCity</a>, <a href=http://www.go.cd/>GoCD</a> or <a href=https://www.atlassian.com/software/bamboo>Bamboo</a>.</p><h4 id=set-up-your-build-server>Set up your build server</h4><p><a href=http://bfy.tw/24hv>There are numerous guides on the internet for setting up Jenkins</a>. Here, however, we want to install an additional plugin - to send our produced <code>.pdf</code> to Dropbox. We could simply install Dropbox on the build agent, and move the <code>.pdf</code> to the desired folder - but syncing your entire Dropbox onto (potentially) multiple build agents is a bit overkill. Fortunately, the fantastic <code>publish-to-dropbox</code><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> Jenkins plugin prevents us from having to do this, or messing with the Dropbox API via CURL (yuck).</p><p>Install the plugin from &lsquo;Manage Jenkins&rsquo; -> &lsquo;Manage Plugins&rsquo; -> &lsquo;Available&rsquo;, and search for &lsquo;Publish Over Dropbox&rsquo;. Once installed (you&rsquo;ll need to restart Jenkins), and generate a Dropbox API token. To do this, browse to &lsquo;Credentials&rsquo; -> &lsquo;Global Credentials&rsquo; -> &lsquo;Add Credentials&rsquo; and select &lsquo;Dropbox API Token&rsquo; via the dropdown. Generate and save the credential.</p><p><img src=/img/JenkinsDropboxToken.PNG alt></p><p>You&rsquo;ll also need to configure the Dropbox location you wish to send the resulting <code>.pdf</code> to. This can be done via &lsquo;Manage Jenkins&rsquo; -> &lsquo;Configure System&rsquo; -> &lsquo;Dropbox&rsquo;. Set an easily-identifiable name for the location, select the credential you just set up from the dropdown, and specify the path from the root of your Dropbox you want files to be delivered to in Unix notation. For example, if your Dropbox contains a folder called &lsquo;foo&rsquo;, which contains a subfolder named &lsquo;bar&rsquo; - specify <code>/foo/bar/</code>.</p><p><img src=/img/DropboxLocationConfig.PNG alt></p><h4 id=configure-your-build-agents>Configure your build agent(s)</h4><p>Once your build agent(s) are set up, make sure <code>LaTeX</code> is installed. There are numerous guides for configuration a <code>TeX</code> environment on either Linux or Windows, but on Ubuntu Server (which I was using), a full TeX environment can be installed via apt-get:</p><pre><code>sudo apt-get install --no-install-recommends texlive-fonts-recommended texlive-latex-extra texlive-fonts-extra dvipng texlive-latex-recommended
</code></pre><h4 id=configure-your-project-in-jenkins>Configure your project in Jenkins</h4><p>Creating a new project in Jenkins is simple - simply login and hit the <code>New Item</code> button.</p><p><img src=/img/Capture-1.PNG alt></p><p>As with any other Jenkins project, you&rsquo;ll need to give your VCS details. I use Git here.</p><p><img src=/img/JenkinsGitDetails.png alt></p><p>Configure Jenkins to poll VCS reasonably often (or use a post-commit hook), and execute <code>pdflatex</code> as the only build step:</p><p><img src=/img/JenkinsBuildSteps.PNG alt></p><p>Finally, archive the produced <code>.pdf</code> to Jenkins and the Dropbox location you specified earlier:</p><p><img src=/img/JenkinsArtifactArchive.PNG alt></p><p>Advanced settings will allow you the option of flattening the output directory structure (advisable), using a DateTime as part of the folder name and/or clearing out the folder before transferring files. This last option might tempt you - but remember that Dropbox will overwrite any files with the same name when you push new files to it. Furthermore, it will treat the new file as a version of the old one - which will allow you to restore the older version should you wish.</p><p><img src=/img/DropboxVersions.PNG alt></p><h4 id=run-the-build>Run the build</h4><p>And we&rsquo;re done! Obviously, once you&rsquo;ve got a basic build set up for <code>LaTeX</code> documents, all sorts of things are possible. You could run a spell checker as part of the build process, or notify a mailing list of a new version of the document. Hopefully, however, this has been enough to get you started - happy writing!</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=https://jenkins-ci.org/>https://jenkins-ci.org/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p><a href=https://github.com/rcgroot/jenkins-publish-over-dropbox-plugin>https://github.com/rcgroot/jenkins-publish-over-dropbox-plugin</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><footer class="post-footer clearfix"><div class=share></div></footer></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://georgevanburgh.github.io/blog/>George Vanburgh</a></h1><a class="button-square button-jump-top js-jump-top" href=# aria-label="Back to Top"><i class="fa fa-angle-up" aria-hidden=true></i></a></div><p class=footer-copyright><span>&copy; 2016 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span><a href=https://github.com/roryg/ghostwriter>Ghostwriter theme</a> By <a href=http://jollygoodthemes.com>JollyGoodThemes</a></span>
<span>/ <a href=https://github.com/jbub/ghostwriter>Ported</a> to Hugo By <a href=https://github.com/jbub>jbub</a></span></p></div></footer><script src=https://georgevanburgh.github.io/blog/js/jquery-1.11.3.min.js></script><script src=https://georgevanburgh.github.io/blog/js/jquery.fitvids.js></script><script src=https://georgevanburgh.github.io/blog/js/scripts.js></script></body></html>